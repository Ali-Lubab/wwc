<!DOCTYPE html>
<html>
<head>
    <title>New transfer</title>
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
<h2>New transfer</h2>

<form onsubmit="sendTransfer(event)">
    <input placeholder="Recipient ID" id="recipientId" required><br>
    <input placeholder="Source amount" id="sourceAmount" required><br>
    <input placeholder="Source currency" id="sourceCurrency" required><br>
    <input placeholder="Target amount" id="targetAmount" required><br>
    <input placeholder="Target currency" id="targetCurrency" required><br><br>

    <button>Send</button>
</form>

<script type="module" src="js/api.js"></script>
<script>
    async function sendTransfer(e) {
        e.preventDefault();

        await apiRequest("/transfers", "POST", {
            sender: { id: sessionStorage.getItem("customerId") },
            recipient: { id: recipientId.value },
            sourceAmount: sourceAmount.value,
            sourceCurrency: sourceCurrency.value,
            targetAmount: targetAmount.value,
            targetCurrency: targetCurrency.value
        });

        window.location.href = "home.html";
    }
</script>
</body>
</html>
